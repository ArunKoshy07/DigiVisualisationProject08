<!DOCTYPE html><html><head>
  <meta charset="utf-8">
  <title>London Noise Map</title>

  <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
  <script src="p5.min.js"></script>
  <script src="p5.dom.min.js"></script>
  <script src="p5.sound.min.js"></script>
  <script src="mapbox-gl.js"></script>
  <link href="https://api.tiles.mapbox.com/mapbox-gl-js/v0.53.0/mapbox-gl.css" rel="stylesheet">
  <script type="text/javascript" src="echarts.css"></script>
  <script src="mapbox-gl-compare.js"></script>
  <link rel="stylesheet" href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-compare/v0.1.0/mapbox-gl-compare.css" type="text/css">
    <link href="https://api.mapbox.com/mapbox-assembly/v0.23.2/assembly.min.css" rel="stylesheet">
  <script async="" defer="" src="assembly.js"></script>

  <script src="sketch.js"></script>
  <link rel="stylesheet" type="text/css" href="style.css">
</head>

<body>

  <div id="before" class="map"></div>
  <div id="after" class="map"></div>

  <div class="map-overlay" id="DataLayers">

    <h2> Noise Data Layers</h2>
    <a>
      <input type="checkbox" id="myCheck" value="railnight" checked="">Night Rail Noise 2019<br>
      <input type="checkbox" id="myCheck" value="roadnight" checked="">Night Road Noise 2019<br>
      <input type="checkbox" id="myCheck" value="lhrnight" checked="">Night Aircraft Noise 2019<br>
      <input type="checkbox" id="myCheck" value="railday" checked="">Day Rail Noise 2019<br>
      <input type="checkbox" id="myCheck" value="roadday" checked="">Day Road Noise 2019<br>
      <input type="checkbox" id="myCheck" value="lhrday" checked="">Day Aircraft Noise 2019<br>
    </a>
  </div>


  <div class="map-overlay" id="features">
    <h2 id="title">London Ward Population Data</h2>
    <h3 id="pd"> click on the ward for details </h3>
  </div>

  <div class="map-overlay" id="legend">    
        <h> Legend </h>
        <div class="w240 round shadow-darken10 px10 py10 txt-s">
          <strong class="block mb6">Road Noise</strong>
          <div class="grid mb6">
            <div class="col bg-green-faint h12"></div>
            <div class="col bg-green-light h12"></div>
            <div class="col bg-green h12"></div>
            <div class="col bg-green-dark h12"></div>
          </div>
          <div class="grid txt-xs">
            <div class="col align-center">&gt;50</div>
            <div class="col align-center">&gt;55</div>
            <div class="col align-center">&gt;60</div>
            <div class="col align-center">&gt;70</div>
            <div class="col align-center">&gt;75</div>
          </div>
        </div>
         <div class="w240 round shadow-darken10 px10 py10 txt-s">
          <strong class="block mb6">Rail Noise</strong>
          <div class="grid mb5">
            <div class="col bg-red-faint h12"></div>
            <div class="col bg-red-light h12"></div>
            <div class="col bg-red h12"></div>
            <div class="col bg-red-dark h12"></div>
          </div>
          <div class="grid txt-xs">
            <div class="col align-center">&gt;50</div>
            <div class="col align-center">&gt;55</div>
            <div class="col align-center">&gt;60</div>
            <div class="col align-center">&gt;70</div>
            <div class="col align-center">&gt;75</div>
          </div>
        </div>
        <div class="w240 round shadow-darken10 px10 py10 txt-s">
          <strong class="block mb5">Aircraf Noise</strong>
          <div class="grid mb6">
            <div class="col bg-yellow-faint h12"></div>
            <div class="col bg-yellow-light h12"></div>
            <div class="col bg-yellow h12"></div>
            <div class="col bg-yellow h12"></div>
            <div class="col bg-yellow-dark h12"></div>
          </div>
          <div class="grid txt-xs">
            <div class="col align-center">&gt;50</div>
            <div class="col align-center">&gt;55</div>
            <div class="col align-center">&gt;60</div>
            <div class="col align-center">&gt;70</div>
            <div class="col align-center">&gt;75</div>
          </div>
        </div>
  </div>

  <div class="map-overlay" id="graph">
    <!--     <div><h2> Population Impacted</h2></div>
    <div id='gd' style="text-align: center"></div> -->
  </div>

  <script src="sketch.js"></script>
  <script>

  </script>
  <script>
    mapboxgl.accessToken = 'pk.eyJ1IjoiYXJ1bmtvc2h5MTgiLCJhIjoiY2pxejNqMTl2MDdseTQ4cGNpdXN6OXE2ZiJ9.C9NoJtuiT9pDw5pyhYZxhQ';
    var beforeMap = new mapboxgl.Map({
      container: 'before',
      style: 'mapbox://styles/arunkoshy18/cjvsuuxjh0z9n1coy83u2sy5k',
      center: [-0.131759, 51.492514],
      zoom: 11.0
    });

    beforeMap.on('load', function() {
      beforeMap.setLayoutProperty('roadday', 'visibility', 'none');
      beforeMap.setLayoutProperty('railday', 'visibility', 'none');
      beforeMap.setLayoutProperty('lhrday', 'visibility', 'none');
      beforeMap.setLayoutProperty('roadnight', 'visibility', 'visible');
      beforeMap.setLayoutProperty('railnight', 'visibility', 'visible');
      beforeMap.setLayoutProperty('lhrnight', 'visibility', 'visible');
    });

    var afterMap = new mapboxgl.Map({
      container: 'after',
      style: 'mapbox://styles/arunkoshy18/cjvsuuxjh0z9n1coy83u2sy5k',
      center: [-0.131759, 51.492514],
      zoom: 11.0
    });

    afterMap.on('load', function() {
      afterMap.setLayoutProperty('roadday', 'visibility', 'visible');
      afterMap.setLayoutProperty('railday', 'visibility', 'visible');
      afterMap.setLayoutProperty('lhrday', 'visibility', 'visible');
      afterMap.setLayoutProperty('roadnight', 'visibility', 'none');
      afterMap.setLayoutProperty('railnight', 'visibility', 'none');
      afterMap.setLayoutProperty('lhrnight', 'visibility', 'none');
    });

    var map = new mapboxgl.Compare(beforeMap, afterMap, {});


    afterMap.on('click', 'population_ward', function(e) {

      var borough = e.features[0].properties.Borough;
      var ward = e.features[0].properties.Name;
      var areainhect = e.features[0].properties.Hectares;
      var population = e.features[0].properties.Population;
      var dispStr = '<a> London Borough     :<a><a1>' + borough + '</a1><br>';
      dispStr += '<a> Ward Name          :<a><a1>' + ward + '</a1><br>'
      dispStr += '<a> Total Population   :<a><a1>' + (population.toFixed(2)).toString() + '</a1><br>'
      dispStr += '<a> Area in Hectares   :<a><a1>' + (areainhect.toFixed(2)).toString() + '</a1><br>'
      dispStr += '<a> Population Density :<a><a1>' + ((population / areainhect).toFixed(2)).toString() + '</a1> per hectare<br>'
      document.getElementById('pd').innerHTML = dispStr;

    });

    beforeMap.on('click', 'population_ward', function(e) {
      var borough = e.features[0].properties.Borough;
      var ward = e.features[0].properties.Name;
      var areainhect = e.features[0].properties.Hectares;
      var population = e.features[0].properties.Population;
      var dispStr = '<a> London Borough     :<a><a1>' + borough + '</a1><br>';
      dispStr += '<a> Ward Name          :<a><a1>' + ward + '</a1><br>'
      dispStr += '<a> Total Population   :<a><a1>' + (population.toFixed(2)).toString() + '</a1><br>'
      dispStr += '<a> Area in hectaure   :<a><a1>' + (areainhect.toFixed(2)).toString() + '</a1><br>'
      dispStr += '<a> Population Density :<a><a1>' + ((population / areainhect).toFixed(2)).toString() + '</a1> per Hectare<br>'
      document.getElementById('pd').innerHTML = dispStr;
    });

    document.getElementById('DataLayers').addEventListener('change', function(e) {
      var selLayer = e.target.value;
      if (e.target.checked) {
        if (selLayer.includes('day')) {
          afterMap.setLayoutProperty(selLayer, 'visibility', 'visible');
        } else {
          beforeMap.setLayoutProperty(selLayer, 'visibility', 'visible');
        }
      } else {
        if (selLayer.includes('day')) {
          afterMap.setLayoutProperty(selLayer, 'visibility', 'none');
        } else {
          beforeMap.setLayoutProperty(selLayer, 'visibility', 'none');
        }
      }
    });
    //     beforeMap.on('click', function(e){

    //     });
  </script>



</body></html>